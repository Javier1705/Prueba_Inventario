@using BO
@model BO.IndexViewModel
@{
    ViewBag.Title = "Inicio";
}

<style>
    body {
        font-family: Arial;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>

<h2>INICIO</h2>

<div id="view" class="">
    <h3>Productos</h3>
    <br />
    @Html.ActionLink("Agregar Producto", "Agregar", "Home", new { @class = "btn btn-success" })
    <table class="table table-striped table-bordered table-hover" id="ProductsTable" style="width:100%">
        <thead>
            <tr>
                <th>Id Producto</th>
                <th>Nombre Producto</th>
                <th>Fecha creacion</th>
                <th>Fecha actualizacion</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (productModel product in Model.Products)
            {
                <tr>
                    <td>@product.id_producto</td>
                    <td>@product.nombre_producto</td>
                    <td>@product.cdate</td>
                    <td>@product.udate</td>
                    <td>
                        @Html.ActionLink("Editar", "Editar", "Home",
                            new { product.id_producto },
                            new { @class = "btn btn-warning" })
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <hr />

    <h3>Entradas y Salidas</h3>
    <br />
    @Html.ActionLink("Agregar Movimiento", "Movimientos", "Home", new { @class = "btn btn-success" })
    <table class="table table-striped table-bordered table-hover" id="movsTable" style="width:100%">
        <thead>
            <tr>
                <th>Id Movimiento</th>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Fecha</th>
            </tr>
        </thead>
        <tbody>
            @foreach (movementsModel movements in Model.Movements)
            {
                <tr>
                    <td>@movements.id_movimiento</td>
                    <td>@movements.nombre_producto</td>
                    <td>@movements.cantidad</td>
                    <td>@movements.cdate</td>
                </tr>
            }
        </tbody>
    </table>
</div>


@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Scripts/datatables.js")
@Scripts.Render("~/bundles/bootstrap")
<script type="text/javascript">

    let table = new DataTable('#ProductsTable');

    let tableM = new DataTable('#movsTable');


    function GetProducts() {
        $.ajax({
            url: "/Home/ActionViewProduct/",
            data: {},
            type: "POST",
            success: function (json) {
                if (json.success) {

                }
            }
        });
    }

    function updateTable(tableId, jsonData) {

        var tableHTML = "<tr>";
        for (var headers in jsonData[0]) {
            tableHTML += "<th>" + headers + "</th>";
        }
        tableHTML += "</tr>";

        for (var eachItem in jsonData) {
            tableHTML += "<tr>";
            var dataObj = jsonData[eachItem];
            for (var eachValue in dataObj) {
                tableHTML += "<td>" + dataObj[eachValue] + "</td>";
            }
            tableHTML += "</tr>";
        }

        document.getElementById(tableId).innerHTML = tableHTML;
    }
</script>